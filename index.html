<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đề Thi Cuối Kỳ 1 Toán 11 - Theo Ma Trận Đặc Tả 2025</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --error-color: #e74c3c;
            --warning-bg: #fff3cd;
        }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; background-color: #f5f6fa; margin: 0; padding: 20px; }
        .container { max-width: 900px; margin: auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        
        /* Header & Timer */
        h1 { text-align: center; color: var(--primary-color); margin-bottom: 5px; }
        .sub-header { text-align: center; font-style: italic; margin-bottom: 20px; color: #7f8c8d; }
        .timer-box { 
            position: sticky; top: 10px; background: var(--error-color); color: white; 
            padding: 10px 20px; border-radius: 25px; text-align: center; font-weight: bold; 
            z-index: 1000; width: fit-content; margin: 0 auto 30px auto; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* Question Blocks */
        .section-title { background: #ecf0f1; padding: 10px 15px; border-left: 5px solid var(--accent-color); margin-top: 30px; border-radius: 0 5px 5px 0; }
        .question-block { margin-bottom: 25px; padding: 15px; border: 1px solid #eee; border-radius: 8px; background: #fff; }
        .q-title { font-weight: 600; margin-bottom: 10px; color: var(--primary-color); }
        
        /* Multiple Choice */
        .options label { display: block; margin-bottom: 8px; cursor: pointer; padding: 5px; border-radius: 4px; transition: background 0.2s; }
        .options label:hover { background: #f0f0f0; }
        
        /* True/False Table */
        .tf-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .tf-table th, .tf-table td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        .tf-table th { background-color: #f8f9fa; }
        .tf-table td:first-child { text-align: left; width: 60%; }
        
        /* Inputs */
        input[type="text"] { padding: 8px; width: 200px; border: 1px solid #bdc3c7; border-radius: 4px; }
        
        /* Explanations */
        .explanation { 
            display: none; margin-top: 10px; padding: 10px; 
            background: var(--warning-bg); border-left: 4px solid #f1c40f; font-size: 0.9em; 
        }
        
        /* Results */
        .result-box { margin-top: 30px; padding: 20px; background: #d4edda; border: 1px solid #c3e6cb; border-radius: 8px; display: none; text-align: center; color: #155724; }
        .btn-submit { 
            display: block; width: 100%; padding: 15px; background: var(--success-color); 
            color: white; border: none; border-radius: 5px; font-size: 18px; cursor: pointer; 
            margin-top: 30px; transition: 0.3s;
        }
        .btn-submit:hover { background: #2ecc71; }
        
        /* Grading Styles */
        .correct { color: var(--success-color); font-weight: bold; }
        .wrong { color: var(--error-color); font-weight: bold; }
        .correct-bg { background-color: #d4edda !important; }
        .wrong-bg { background-color: #f8d7da !important; }

    </style>
</head>
<body>

<div class="timer-box" id="timer">Thời gian còn lại: 60:00</div>

<div class="container">
    <h1>ĐỀ KIỂM TRA CUỐI KỲ 1 TOÁN 11</h1>
    <p class="sub-header">Cấu trúc: 10 câu TN (3đ) - 3 câu Đúng/Sai (4đ) - 3 câu Trả lời ngắn (3đ)</p>

    <form id="quizForm">
        <div class="section-title"><h2>PHẦN I. TRẮC NGHIỆM NHIỀU LỰA CHỌN (3,0 điểm)</h2></div>
        <p><i>Mỗi câu đúng được 0,3 điểm.</i></p>

        <div class="question-block" id="q1-block">
            <div class="q-title">Câu 1: [NB] Khẳng định nào sau đây sai?</div>
            <div class="options">
                <label><input type="radio" name="q1" value="A"> A. \(\sin^2 x + \cos^2 x = 1\)</label>
                <label><input type="radio" name="q1" value="B"> B. \(1 + \tan^2 x = \frac{1}{\cos^2 x}\) (\(x \neq \frac{\pi}{2} + k\pi\))</label>
                <label><input type="radio" name="q1" value="C"> C. \(\sin 2x = 2\sin x \cos x\)</label>
                <label><input type="radio" name="q1" value="D"> D. \(\cos 2x = \sin^2 x - \cos^2 x\)</label>
            </div>
            <div class="explanation" id="exp-q1">
                <span class="wrong">Giải thích:</span> Công thức đúng là \(\cos 2x = \cos^2 x - \sin^2 x\). Đáp án D sai. [cite: 2]
            </div>
        </div>

        <div class="question-block" id="q2-block">
            <div class="q-title">Câu 2: [NB] Nghiệm của phương trình \(\cot x = \sqrt{3}\) là:</div>
            <div class="options">
                <label><input type="radio" name="q2" value="A"> A. \(x = \frac{\pi}{6} + k\pi\)</label>
                <label><input type="radio" name="q2" value="B"> B. \(x = \frac{\pi}{3} + k\pi\)</label>
                <label><input type="radio" name="q2" value="C"> C. \(x = \frac{\pi}{6} + k2\pi\)</label>
                <label><input type="radio" name="q2" value="D"> D. \(x = -\frac{\pi}{6} + k\pi\)</label>
            </div>
            <div class="explanation" id="exp-q2">
                <span class="correct">Giải thích:</span> \(\cot x = \cot \frac{\pi}{6} \Rightarrow x = \frac{\pi}{6} + k\pi\). [cite: 7]
            </div>
        </div>

        <div class="question-block" id="q3-block">
            <div class="q-title">Câu 3: [NB] Cho cấp số cộng \((u_n)\) với \(u_1 = 2\) và công sai \(d = 3\). Số hạng thứ 4 là:</div>
            <div class="options">
                <label><input type="radio" name="q3" value="A"> A. 5</label>
                <label><input type="radio" name="q3" value="B"> B. 8</label>
                <label><input type="radio" name="q3" value="C"> C. 11</label>
                <label><input type="radio" name="q3" value="D"> D. 14</label>
            </div>
            <div class="explanation" id="exp-q3">
                <span class="correct">Giải thích:</span> \(u_4 = u_1 + 3d = 2 + 3(3) = 11\). [cite: 2]
            </div>
        </div>

        <div class="question-block" id="q4-block">
            <div class="q-title">Câu 4: [NB] Cho cấp số nhân \((u_n)\) có \(u_1 = 3, q = 2\). Công thức số hạng tổng quát là:</div>
            <div class="options">
                <label><input type="radio" name="q4" value="A"> A. \(u_n = 3 \cdot 2^{n-1}\)</label>
                <label><input type="radio" name="q4" value="B"> B. \(u_n = 3 \cdot 2^n\)</label>
                <label><input type="radio" name="q4" value="C"> C. \(u_n = 2 \cdot 3^{n-1}\)</label>
                <label><input type="radio" name="q4" value="D"> D. \(u_n = 3 + 2(n-1)\)</label>
            </div>
            <div class="explanation" id="exp-q4">
                <span class="correct">Giải thích:</span> Công thức SHTQ của CSN: \(u_n = u_1 \cdot q^{n-1}\). [cite: 7]
            </div>
        </div>

        <div class="question-block" id="q5-block">
            <div class="q-title">Câu 5: [NB] \(\lim_{n \to +\infty} \frac{2n+1}{n-3}\) bằng:</div>
            <div class="options">
                <label><input type="radio" name="q5" value="A"> A. 2</label>
                <label><input type="radio" name="q5" value="B"> B. \(-1/3\)</label>
                <label><input type="radio" name="q5" value="C"> C. \(+\infty\)</label>
                <label><input type="radio" name="q5" value="D"> D. 0</label>
            </div>
            <div class="explanation" id="exp-q5">
                <span class="correct">Giải thích:</span> Chia cả tử và mẫu cho n, giới hạn bằng hệ số cao nhất: 2/1 = 2. [cite: 2]
            </div>
        </div>

        <div class="question-block" id="q6-block">
            <div class="q-title">Câu 6: [NB] Hàm số nào sau đây liên tục trên \(\mathbb{R}\)?</div>
            <div class="options">
                <label><input type="radio" name="q6" value="A"> A. \(y = \tan x\)</label>
                <label><input type="radio" name="q6" value="B"> B. \(y = \frac{1}{x}\)</label>
                <label><input type="radio" name="q6" value="C"> C. \(y = \sqrt{x-1}\)</label>
                <label><input type="radio" name="q6" value="D"> D. \(y = x^3 - 3x + 1\)</label>
            </div>
            <div class="explanation" id="exp-q6">
                <span class="correct">Giải thích:</span> Hàm đa thức (Đáp án D) liên tục trên toàn bộ tập số thực. [cite: 7]
            </div>
        </div>

        <div class="question-block" id="q7-block">
            <div class="q-title">Câu 7: [NB] Cho đường thẳng \(a\) song song với mặt phẳng \((P)\). Khẳng định nào đúng?</div>
            <div class="options">
                <label><input type="radio" name="q7" value="A"> A. \(a\) song song với mọi đường thẳng trong \((P)\).</label>
                <label><input type="radio" name="q7" value="B"> B. \(a\) không có điểm chung với \((P)\).</label>
                <label><input type="radio" name="q7" value="C"> C. Tồn tại duy nhất một đường thẳng trong \((P)\) song song với \(a\).</label>
                <label><input type="radio" name="q7" value="D"> D. \(a\) vuông góc với \((P)\).</label>
            </div>
            <div class="explanation" id="exp-q7">
                <span class="correct">Giải thích:</span> Định nghĩa: Đường thẳng song song với mặt phẳng nếu chúng không có điểm chung. [cite: 7]
            </div>
        </div>

        <div class="question-block" id="q8-block">
            <div class="q-title">Câu 8: [NB] Hình lăng trụ tam giác có bao nhiêu mặt?</div>
            <div class="options">
                <label><input type="radio" name="q8" value="A"> A. 4</label>
                <label><input type="radio" name="q8" value="B"> B. 5</label>
                <label><input type="radio" name="q8" value="C"> C. 6</label>
                <label><input type="radio" name="q8" value="D"> D. 9</label>
            </div>
            <div class="explanation" id="exp-q8">
                <span class="correct">Giải thích:</span> Lăng trụ tam giác có 2 mặt đáy và 3 mặt bên. Tổng là 5 mặt. [cite: 2]
            </div>
        </div>

        <div class="question-block" id="q9-block">
            <div class="q-title">Câu 9: [NB] Cho mẫu số liệu ghép nhóm: [0;20): 5, [20;40): 12, [40;60): 8. Nhóm chứa mốt là:</div>
            <div class="options">
                <label><input type="radio" name="q9" value="A"> A. [0; 20)</label>
                <label><input type="radio" name="q9" value="B"> B. [20; 40)</label>
                <label><input type="radio" name="q9" value="C"> C. [40; 60)</label>
                <label><input type="radio" name="q9" value="D"> D. Không xác định</label>
            </div>
            <div class="explanation" id="exp-q9">
                <span class="correct">Giải thích:</span> Nhóm chứa mốt là nhóm có tần số lớn nhất (12). Vậy là nhóm [20; 40). [cite: 7]
            </div>
        </div>

        <div class="question-block" id="q10-block">
            <div class="q-title">Câu 10: [NB] \(\lim_{x \to 2} (x^2 + 1)\) bằng:</div>
            <div class="options">
                <label><input type="radio" name="q10" value="A"> A. 3</label>
                <label><input type="radio" name="q10" value="B"> B. 4</label>
                <label><input type="radio" name="q10" value="C"> C. 5</label>
                <label><input type="radio" name="q10" value="D"> D. 0</label>
            </div>
            <div class="explanation" id="exp-q10">
                <span class="correct">Giải thích:</span> Thay x = 2 vào hàm số: \(2^2 + 1 = 5\). [cite: 7]
            </div>
        </div>

        <div class="section-title"><h2>PHẦN II. TRẮC NGHIỆM ĐÚNG SAI (4,0 điểm)</h2></div>
        <p><i>Trả lời ĐÚNG hoặc SAI cho mỗi ý a), b), c), d). Quy tắc điểm: 1 ý đúng: 0.1đ; 2 ý: 0.25đ; 3 ý: 0.5đ; 4 ý: 1.0đ.</i></p>

        <div class="question-block" id="tf1-block">
            <div class="q-title">Câu 1: Cho phương trình \(2\cos x - 1 = 0\).</div>
            <table class="tf-table">
                <tr><th>Mệnh đề</th><th>Đúng</th><th>Sai</th></tr>
                <tr>
                    <td>a) Phương trình tương đương \(\cos x = \frac{1}{2}\).</td>
                    <td><input type="radio" name="tf1a" value="true"></td>
                    <td><input type="radio" name="tf1a" value="false"></td>
                </tr>
                <tr>
                    <td>b) Nghiệm của phương trình là \(x = \pm \frac{\pi}{6} + k2\pi\).</td>
                    <td><input type="radio" name="tf1b" value="true"></td>
                    <td><input type="radio" name="tf1b" value="false"></td>
                </tr>
                <tr>
                    <td>c) Trên khoảng \((0; \pi)\), phương trình có đúng 1 nghiệm.</td>
                    <td><input type="radio" name="tf1c" value="true"></td>
                    <td><input type="radio" name="tf1c" value="false"></td>
                </tr>
                <tr>
                    <td>d) Tổng các nghiệm thuộc \([0; 2\pi]\) bằng \(2\pi\).</td>
                    <td><input type="radio" name="tf1d" value="true"></td>
                    <td><input type="radio" name="tf1d" value="false"></td>
                </tr>
            </table>
            <div class="explanation" id="exp-tf1">
                <span class="correct">Đáp án:</span> a-Đ, b-S, c-Đ, d-Đ.<br>
                Giải thích: \(\cos x = 1/2 \Rightarrow x = \pm \pi/3 + k2\pi\).<br>
                Nghiệm trong \([0; 2\pi]\) là \(\pi/3\) và \(5\pi/3\). Tổng = \(2\pi\). [cite: 7]
            </div>
        </div>

        <div class="question-block" id="tf2-block">
            <div class="q-title">Câu 2: Cước phí gửi xe: Dưới 1h giá 10k, từ 1h đến dưới 2h giá 20k. Hàm chi phí \(C(t)\).</div>
            <table class="tf-table">
                <tr><th>Mệnh đề</th><th>Đúng</th><th>Sai</th></tr>
                <tr>
                    <td>a) Nếu gửi 45 phút, phí là 10.000đ.</td>
                    <td><input type="radio" name="tf2a" value="true"></td>
                    <td><input type="radio" name="tf2a" value="false"></td>
                </tr>
                <tr>
                    <td>b) Nếu gửi 1 giờ 30 phút, phí là 15.000đ.</td>
                    <td><input type="radio" name="tf2b" value="true"></td>
                    <td><input type="radio" name="tf2b" value="false"></td>
                </tr>
                <tr>
                    <td>c) \(\lim_{t \to 1^+} C(t) = 20.000\).</td>
                    <td><input type="radio" name="tf2c" value="true"></td>
                    <td><input type="radio" name="tf2c" value="false"></td>
                </tr>
                <tr>
                    <td>d) Hàm số liên tục tại \(t = 1\).</td>
                    <td><input type="radio" name="tf2d" value="true"></td>
                    <td><input type="radio" name="tf2d" value="false"></td>
                </tr>
            </table>
            <div class="explanation" id="exp-tf2">
                <span class="correct">Đáp án:</span> a-Đ, b-S, c-Đ, d-S.<br>
                Giải thích: Phí từ 1h-2h là 20k. Tại t=1 có bước nhảy giá nên hàm gián đoạn. [cite: 7, 8]
            </div>
        </div>

        <div class="question-block" id="tf3-block">
            <div class="q-title">Câu 3: Cho chóp S.ABCD đáy hình bình hành. M, N là trung điểm SA, CD.</div>
            <table class="tf-table">
                <tr><th>Mệnh đề</th><th>Đúng</th><th>Sai</th></tr>
                <tr>
                    <td>a) Đường thẳng CD song song với (SAB).</td>
                    <td><input type="radio" name="tf3a" value="true"></td>
                    <td><input type="radio" name="tf3a" value="false"></td>
                </tr>
                <tr>
                    <td>b) Giao tuyến của (SAC) và (SBD) là SO (O là tâm đáy).</td>
                    <td><input type="radio" name="tf3b" value="true"></td>
                    <td><input type="radio" name="tf3b" value="false"></td>
                </tr>
                <tr>
                    <td>c) MN song song với mặt phẳng (SBC).</td>
                    <td><input type="radio" name="tf3c" value="true"></td>
                    <td><input type="radio" name="tf3c" value="false"></td>
                </tr>
                <tr>
                    <td>d) Thiết diện của (MCD) với hình chóp là hình thang.</td>
                    <td><input type="radio" name="tf3d" value="true"></td>
                    <td><input type="radio" name="tf3d" value="false"></td>
                </tr>
            </table>
            <div class="explanation" id="exp-tf3">
                <span class="correct">Đáp án:</span> a-Đ, b-Đ, c-S, d-Đ.<br>
                Giải thích: c) Sai vì MN cắt (SBC) tại giao điểm của MN và SB (kéo dài). d) Đúng, giao tuyến với (SAB) qua M song song AB/CD nên là hình thang. [cite: 7]
            </div>
        </div>

        <div class="section-title"><h2>PHẦN III. TRẢ LỜI NGẮN (3,0 điểm)</h2></div>
        <p><i>Điền kết quả vào ô trống (số hoặc phân số tối giản). Mỗi câu 1,0 điểm.</i></p>

        <div class="question-block" id="sa1-block">
            <div class="q-title">Câu 1: [VDC] Một quả bóng rơi từ độ cao 20m. Mỗi lần chạm đất nảy lên bằng 1/2 độ cao trước. Tổng quãng đường di chuyển đến khi dừng hẳn là bao nhiêu mét?</div>
            <input type="text" id="sa1" placeholder="Nhập đáp án...">
            <div class="explanation" id="exp-sa1">
                <span class="correct">Đáp án: 60</span>.<br>
                Xuống: 20 + 10 + 5... (S = 40). Lên: 10 + 5... (S = 20). Tổng = 60m. [cite: 8]
            </div>
        </div>

        <div class="question-block" id="sa2-block">
            <div class="q-title">Câu 2: Tìm \(a\) để \(f(x) = \begin{cases} \frac{x^2-4}{x-2} & x \neq 2 \\ a & x = 2 \end{cases}\) liên tục tại \(x=2\).</div>
            <input type="text" id="sa2" placeholder="Nhập giá trị a...">
            <div class="explanation" id="exp-sa2">
                <span class="correct">Đáp án: 4</span>.<br>
                Lim khi x->2 là x+2 = 4. Vậy a = 4. [cite: 8]
            </div>
        </div>

        <div class="question-block" id="sa3-block">
            <div class="q-title">Câu 3: Cho tứ diện đều cạnh a. Góc giữa đường thẳng AB và mặt phẳng (BCD) có cosin bằng bao nhiêu? (Làm tròn 2 chữ số thập phân).</div>
            <input type="text" id="sa3" placeholder="Ví dụ: 0.50">
            <div class="explanation" id="exp-sa3">
                <span class="correct">Đáp án: 0.58</span> (hoặc \(\sqrt{3}/3\)).<br>
                Hình chiếu của A là tâm H của đáy. \(\cos(AB, (BCD)) = \cos(\widehat{ABH}) = BH/AB = (a\sqrt{3}/3)/a \approx 0.58\). [cite: 8]
            </div>
        </div>

        <button type="button" class="btn-submit" onclick="submitQuiz()">NỘP BÀI & XEM KẾT QUẢ</button>
    </form>

    <div class="result-box" id="result-display">
        <h2>Kết quả của bạn</h2>
        <p style="font-size: 24px; font-weight: bold;" id="score-text">0 / 10</p>
        <p>Kéo lên trên để xem hướng dẫn giải chi tiết (khung màu vàng).</p>
    </div>
</div>

<script>
    // Config đáp án
    const answers = {
        mc: { q1: "D", q2: "A", q3: "C", q4: "A", q5: "A", q6: "D", q7: "B", q8: "B", q9: "B", q10: "C" },
        tf: {
            tf1: {a: "true", b: "false", c: "true", d: "true"},
            tf2: {a: "true", b: "false", c: "true", d: "false"},
            tf3: {a: "true", b: "true", c: "false", d: "true"}
        },
        sa: { sa1: ["60", "60m"], sa2: ["4"], sa3: ["0.58", "0,58", "sqrt(3)/3"] }
    };

    // Timer logic
    let time = 60 * 60;
    const timerElem = document.getElementById('timer');
    const timerInterval = setInterval(() => {
        let m = Math.floor(time / 60);
        let s = time % 60;
        timerElem.innerText = `Thời gian còn lại: ${m}:${s < 10 ? '0' + s : s}`;
        time--;
        if (time < 0) {
            clearInterval(timerInterval);
            alert("Hết giờ!");
            submitQuiz();
        }
    }, 1000);

    function submitQuiz() {
        clearInterval(timerInterval);
        let score = 0;
        const form = document.getElementById('quizForm');

        // 1. Chấm MC (10 câu x 0.3)
        for(let i=1; i<=10; i++) {
            let key = 'q'+i;
            let val = form.elements[key].value;
            let block = document.getElementById(key+'-block');
            document.getElementById('exp-'+key).style.display = 'block';
            
            if(val === answers.mc[key]) {
                score += 0.3;
                block.style.borderLeft = "5px solid #27ae60";
            } else {
                block.style.borderLeft = "5px solid #e74c3c";
            }
        }

        // 2. Chấm TF (3 câu - Thang 0.1, 0.25, 0.5, 1.0)
        for(let i=1; i<=3; i++) {
            let correctCount = 0;
            let parts = ['a','b','c','d'];
            parts.forEach(p => {
                let key = 'tf'+i+p;
                let val = form.elements[key].value;
                // Highlight row logic could be added here
                if(val === answers.tf['tf'+i][p]) correctCount++;
            });
            
            if(correctCount === 1) score += 0.1;
            else if(correctCount === 2) score += 0.25;
            else if(correctCount === 3) score += 0.5;
            else if(correctCount === 4) score += 1.0;

            document.getElementById('exp-tf'+i).style.display = 'block';
        }

        // 3. Chấm SA (3 câu x 1.0)
        for(let i=1; i<=3; i++) {
            let key = 'sa'+i;
            let val = document.getElementById(key).value.trim();
            let block = document.getElementById(key+'-block');
            document.getElementById('exp-'+key).style.display = 'block';

            if(answers.sa[key].includes(val)) {
                score += 1.0;
                block.style.borderLeft = "5px solid #27ae60";
            } else {
                block.style.borderLeft = "5px solid #e74c3c";
            }
        }

        // Display Score
        let finalScore = Math.round(score * 100) / 100;
        document.getElementById('score-text').innerText = `${finalScore} / 10`;
        document.getElementById('result-display').style.display = 'block';
        document.querySelector('.btn-submit').disabled = true;
        
        // Scroll to result
        document.getElementById('result-display').scrollIntoView({ behavior: 'smooth' });
    }
</script>

</body>
</html>
